//Home .html page

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <section>
        <h1>Logo</h1>
        <nav>
            <a href="">Home</a>
            <a href="./adminlogin.html">admin login</a>
            <a href="./studentlogin.html">studentlogin</a>
        </nav>
    </section>


    <!-- <script>
        function admin(){
            console.log("hello")
            window.location.assign("./adminlogin.html")
        }
        function student(){
            window.location.assign("./studentlogin.html")
        }
    </script> -->
</body>
</html>



//admin.html page
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>Login</h1>
    <form action="">
        <input type="text" placeholder="enter user name" id="uName">
        <input type="password" placeholder="enter password" id="uPass">
        <input type="submit">
    </form>
    <table>
        <tbody id="store">

        </tbody>
    </table>
    <script>
        let form = document.querySelector("form");
        let uName = document.getElementById("uName");
        let uPass = document.getElementById("uPass");
        async function fetchAdmin() {
            let data = await fetch("http://localhost:8000/admin");
            let res = await data.json();
            console.log(res);

            form.addEventListener("submit", e => {
                e.preventDefault();
                let username = uName.value;
                let password = uPass.value;
                console.log(username, password)
                if (res.role == "admin" && res.username == username && res.password == password) {
                    alert("admin login successfull");
                    async function fetchStudents() {
                        let data = await fetch("http://localhost:8000/students");
                        let res = await data.json();
                        console.log(res);
                        res.map(stu => {
                            // console.log(stu)
                            let store = document.getElementById("store");
                            store.innerHTML += `
                        <tr>
                            <td>${stu.sName}</td>
                            <td>${stu.sAge}</td>
                            <td>${stu.sPassword}</td>
                            <td><button id='edit'>Edit</button></td>
                            <td><button id='delete'>Delete</button></td>
                            </tr>
                        `
                            let edit = document.getElementById("edit");
                            edit.onclick = function () {
                                window.location.assign("./edit.html");
                            }
                        })


                    }
                    fetchStudents();

                }
                else {
                    alert("You are not admin")
                }
            })
        }


        fetchAdmin();



    </script>
</body>

</html>


//studentlogin.html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1 style="text-align: center;">Student Details</h1>
    <form action="">
        <input type="text" placeholder="enter student name" id="stName">
        <input type="password" placeholder="enter student password" id="stPass">
        <input type="submit">
    </form>
    <table border="2px">
        <thead>
            <tr>
                <th>Name</th>
                <th>Age</th>
                <th>Password</th>
            </tr>
        </thead>
        <tbody id="store">

        </tbody>
    </table>

    <script>




        let form = document.querySelector("form");
        let stName = document.getElementById("stName");
        let stPass = document.getElementById("stPass");
        form.addEventListener("submit", e => {
            e.preventDefault();
            console.log("submitted")
            async function fetchStudents() {
            let data = await fetch("http://localhost:8000/students");
            let res = await data.json();
            console.log(res);

            res.map(student => {

                console.log(stName.value==student.sName , stPass.value == student.sPassword)

              if(stName.value == student.sName && stPass.value == student.sPassword){
                    let store = document.getElementById("store");
                    store.innerHTML += `
                    <tr>
                        <td>${student.sName}</td>
                            <td>${student.sAge}</td>
                            <td>${student.sPassword}</td>
                        </tr>
                    `

                }
            })
        }
        fetchStudents();

        })


    </script>
</body>

</html>